Grammar:		DataElement 5.0
Namespace:		cimi.clinicalcontextcore
Description:	"The Context Core Package defines the high-level clinical statement context classes. Three types of contexts are currently defined in CIMI: (1) Finding Contexts, (2) Action Contexts, and (3) Event Contexts. Finding contexts are used to specify whether a finding was observed to be present or absent. Action contexts are used to specify whether a clinical activity was performed, ordered, planned, or perhaps not performed."
Uses:			cimi.datatypes, cimi.foundation, cimi.core, cimi.clinicalassociation, cimi.clinicalentity, cimi.clinicalprovenance, cimi.clinicalevaluationresult, cimi.clinicalcommondatastructures

Element:		StatementContext
Based on:		VIRTUALCLUSTER
Concept:		TBD
Description: 	"Compositional and reusable grouping of clinical statement attributes that provides the context for the topic of a clinical statement. The StatementContext class aligns with the SNOMED CT Situations with Explicit Context. The StatementContext provides the expressivity required to specify that an act was performed or not performed or that a finding was asserted to be present or absent for the given subject of information. It also often holds provenance information relevant to the context of the clinical statement. It is important to note that by default the context applies to the conjunction of the attribute specified in the statement. For instance, if a clinical statement has a topic describing a rash on left arm and a context of 'absent', then the statement states that the subject of interest did not have a rash on the left arm but might have had one on the right arm."
1..1			ContextCode //Formerly Context
// BALLOT: ClinicalStatement.Context is given by a StatementContext. StatementContext also has a context, StatementContext.Context. The resulting path, ClinicalStatement.Context.Context, is quite confusing, especially since both contexts share virtually identical definitions. I suggest ClinicalStatement.Context.ContextCode would be much cleaner.
0..1			TemporalContext

Element:		ContextCode
Concept:		TBD
Description:	"The ontological status of the statement, e.g., whether it exists, does not exist, is planned, etc. Attribute aligns with the SNOMED CT Situation with Explicit Context (SWEC) Concept Model context attributes: 'Finding context (attribute)' (SCTID: 408729009) and 'Procedure context (attribute)' (SCTID: 408730004). The range allowed for this attribute shall be consistent with the SNOMED CT concept model specification for SWEC."
Value:			CodedText

Element:		TemporalContext
Concept:		TBD
Description:	"Whether the topic is prospective or retrospective. E.g., action occurred in the past. This attribute is aligned with the SNOMED Situation With Explicit Context temporal context attribute."
Value:			CodedText

Element:		FindingContext
Based on:		StatementContext
Concept:		TBD
Description:	"The FindingContext class aligns with the SNOMED Situation with Explicit Context for findings and provides the context for the EvaluationResult and Assertion topics of a clinical statement. For instance, a statement about findings may state that the finding was observed present or absent."
0..1			CurrentStatus

Element:		CurrentStatus
Concept:		TBD
Description:	"Current state of the evaluation (e.g., pending, complete, partial)."
Value:			CodedText
// BALLOT: The name "CurrentStatus" could cause confusion because if refers to the time the record was written. However, when the record is read, the CurrentStatus is really a PastStatus - namely, the status when the information was last updated. Suggest changing to "FindingStatus", which has no unintended implications of time.
// BALLOT: FindingContext.CurrentStatus has an inadequate defintion. What is the 'evaluation' whose state the CurrentStatus represents?

Element:		PresenceAbsenceContext
Based on:		FindingContext
Concept:		TBD
Description:	"Base class for contexts asserting presence or absence of a finding."

Element:		Absent
Based on:		PresenceAbsenceContext
Concept:		TBD
Description:	"Context indicating the known absence of a finding in the subject of information. If the finding is suspected to be absent, use the known or suspected present context instead."

Element:		KnownOrSuspectedPresent
Based on:		PresenceAbsenceContext
Concept:		TBD
Description:	"Context indicating that finding is known present or suspected present."
0..1			Certainty
0..1			DateOfOnset //TODO: This should be 0..1, but doing so generates an CLI error
0..1			AgeAtOnset
0..1			DateAbated //TODO: This should be 0..1, but doing so generates an CLI error
0..1			HasAbated

Element:		Certainty
Concept:		TBD
Description:	"The confidence associated with this statement."
Value:			CodedText

Element:		DateOfOnset
Concept:		TBD
Description:	"Date or time when the characteristic was first observed. When the asserted condition began manifesting. This property may have a broad precision (e.g., a year rather than a date)."
Value:			DateTime

Element:		AgeAtOnset
Concept:		TBD
Description:	"The age of the patient or subject at onset of the Condition. Note that this property could potentially be derived."
Value:			Quantity
// BALLOT: AgeAtOnset (KnownOrSuspectedPresent.AgeAtOnset) has an incorrect datatype. It is defined as QUANTITY, it should be Age. 

Element:		DateAbated
Concept:		TBD
Description:	"Date, if known, when clinical finding abated."
Value:			DateTime

Element:		HasAbated
Concept:		TBD
Description:	"Flag indicating whether a condition has abated when a specific date of, time period, or age at abatement is not known."
Value:			YesNo

Element:		ActionContext
Based on:		StatementContext
Concept:		TBD
Description:	"The ActionContext class aligns with the SNOMED Situations with Explicit Context and provides the context for the Act topic of a clinical statement. For instance, a statement about a procedure may specify that the procedure has been proposed, ordered, planned, performed or possibly not performed."
0..*			Justification
0..1			CurrentStatus
0..1			Category
0..*			SupportingInformation
// BALLOT: CurrentStatus is an attribute of both ActionContext and FindingContext, and could be moved up to the mutual parent class, StatementContext

Element:		SupportingInformation
Concept:		TBD
Description:	"Additional information (for example, patient height and weight) that supports the performance, non-performance, ordering, or proposing of the clinical action. E.g., documentation of heart rate before administering the medication in case medication needs to be held if heart rate falls in a specific range."
Value:			ref(LOCATABLE)
// TODO: Any class restriction?

Element:		Performance
Based on:		ActionContext
Concept:		TBD
Description:	"Context indicating actual performance or execution of a healthcare-related action, e.g., 3rd dose of Hepatitis B vaccine administered on Dec 4th 2012, appendectomy performed today."
0..*			Performed
0..1			EnactsPlan
0..1			FulfillsOrder
0..*			BasedOn
0..1			PerformanceDuration
// DELTA: Changed Performance.Duration to Performance.PerformanceDuration to avoid collision with the Duration datatype
0..1			PartOf

Element:		Performed
Concept:		TBD
Description:	"The party that performed the action."
Value:			Attribution

Element:		EnactsPlan
Concept:		TBD
Description:	"The plan that is partly or wholly enacted by the performance of this act."
Value:			ref(Plan)
// DELTA: Changed Performance.EnactsPlan.Value to type ref(Plan) from Class<T>

Element:		FulfillsOrder
Concept:		TBD
Description:	"The order that is partly or wholly enacted by the performance of this act."
Value:			ref(Order)

Element:		BasedOn
Concept:		TBD
Description:	"The proposal that is partly or wholly fulfilled by the performance of this act."
Value:			ref(Proposal)  
// DELTA: Changed Performance.BasedOn.Value to type ref(Proposal) from Class<T>

Element:		PerformanceDuration
Concept:		TBD
Description:	"The duration of time the action was performed."
Value:			Quantity
// BALLOT: Performance.Duration should use the Duration datatype, not Quantity.

Element:		PartOf
Concept:		TBD
Description:	"A larger event of which this particular event is a component or step."
Value:			ref(Performance)
// DELTA: Changed Performance.PartOf to type ref(Performance) from Class<T>
	
Element:		Plan
Based on:		ActionContext
Concept:		TBD
Description:	"Description of action that is planned to be performed. Typically, this would include a time at which the action is scheduled to be performed."
0..1			FulfillsOrder
0..*			BasedOn
0..1			ExpectedPerformanceTime
0..*			ExpectedPerformer

Element:		ExpectedPerformanceTime
Concept:		TBD
Description:	"The time when the action is expected to be performed"
Value:			DateTime

Element:		ExpectedPerformer
Concept:		TBD
Description:	"Persons who are expected to or intended to perform this action, e.g., the person who will perform the surgery."
Value:			ref(PARTICIPATION)

Element:		Request
Based on:		ActionContext
Concept:		TBD
Description:	"An request by a healthcare provider or system to another healthcare provider or system to perform some act."
1..1			Type
0..1			ExpectedPerformanceTime
0..*			ExpectedPerformer
0..1			ExpectedPerformerCode
0..1			Priority
0..1			Timing
0..1			Duration
0..1			DurationCode

// BALLOT: Request.Duration is a length of time, not an interval. It should use the Duration datatype, not IntervalValue.

// BALLOT: Request.ExpectedPerformerCode should be 0..* since multiple performers can be involved (also, to match ExpectedPerfomer)

Element:		ExpectedPerformerCode
Concept:		TBD
Description:	"Persons who are expected to or intended to perform this action, e.g., the person who will perform the surgery."
Value:			CodedText

Element:		DurationCode
Concept:		TBD
Description:	"The anticipated duration for the action."
Value:			CodedText


Element:		Order
Based on:		Request
Concept:		TBD
Description:	"An instruction by a healthcare provider to another healthcare provider to perform some act."
0..1			GroupIdentifier
0..*			BasedOn
0..1			NeededNoLaterThan
0..*			PatientInstructions
0..1			StartDateTime
0..1			StopDateTime
0..1			PriorRequest
// BALLOT: This is minor, but in Order, is there any reason to have a separate startDateTime and stopDateTime, as opposed to an Interval<DateTime>?

Element:		GroupIdentifier
Concept:		TBD
Description:	"A shared identifier common to all requests that were authorized more or less simultaneously by a single author, representing the identifier of the requisition or prescription. E.g., an order set for a given patient contains a set of medication orderables. Each child orderable in the order set may contain a group identifier which is the identifier of the order set itself (the requisition)."
Value:			Identifier

Element:		NeededNoLaterThan
Concept:		TBD
Description:	"Point in time when order must be performed."
Value:			DateTime

Element:		PatientInstructions
Concept:		TBD
Description:	"Identifies the ordering provider's instructions to the patient or to the provider on how to deliver or comply with the ordered procedure."
Value:			TEXT

Element:		StartDateTime
Concept:		TBD
Description:	"When the activity should start."
Value:			DateTime

Element:		StopDateTime
Concept:		TBD
Description:	"When the activity should end."
Value:			DateTime

Element:		PriorRequest
Concept:		TBD
Description:	"A link to a resource representing an earlier order related order or prescription."
Value:			ref(Request)


Element:		Proposal
Based on:		Request
Concept:		TBD
Description:	"An offer or a suggestion to perform a healthcare act. A recommendation to a provider is an example of proposal made by a CDS system. A proposal must be accepted by an entity in order for it to be performed."

Element:		ProposalAgainst
Based on:		ActionContext
Concept:		TBD
Description:	"Concept represents a recommendation from a clinical decision support system or advice from a consultation to not perform an act."
0..1			NonPerformanceTime

Element:		NonPerformanceTime
Concept:		TBD
Description:	"The time period during which the act should not be performed."
Value:			IntervalValue

Element:		Promise
Based on:		ActionContext
Concept:		TBD
Description:	"An order from the perspective of a fulfillment system."
0..1			FulfillsOrder
0..1			OrderModality
0..1			OrderDiscontinueDate

Element:		OrderModality
Concept:		TBD
Description:	"This is the method the provider used to communicate to the user to enter (or take any other action) on the order. Examples include: Written, Telephoned, Verbal, Electronically Entered, Policy, Service Correction, Duplicate, etc. 'Code indicating the origin of the prescription.' - NCPDP Telecommunication (Field 419-DJ, Data Dictionary 201104). Possible values include: Written; Telephone; Electronic; Facsimile; Pharmacy; Not Known."
Value:			CodedText

Element:		OrderDiscontinueDate
Concept:		TBD
Description:	"This is the date the order was discontinued."
Value:			DateTime

Element:		PharmacyPromise	
Based on:		Promise
Concept:		TBD
Description:	"This class represents the prescription context from the perspective of the filling system (i.e., the pharmacy) whereas the Pharmacy Request represents the prescription from the ordering system (i.e., the prescriber). This class is a subtype of the more general Healthcare Promise, which describes properties common to all types or Orders from the filling system perspective– this class adds those properties which are specific to medication orders. This class is called Pharmacy Promise rather than Pharmacy Order following the HL7 V3 convention to use the term Promise to indicate that it is from the filling system’s perspective. There are many properties which are identical to the Order; this is because the pharmacy may change the order, within prescribed limits, for example substituting a generic drug for a brand-named one."
0..1			AppointmentTime
0..1			ExpirationDate
0..1			IsHospitalSuppliedSelfAdministered
0..1			IsSelfAdministered
0..1			LastDispenseDate
0..1			NeedsHumanReview
0..1			NumberOfRefillsOrDosesDispensed
0..1			NumberOfRefillsRemaining
0..*			RequestedAdministrationTime
0..1			RequestedDuration
0..1			ScheduleType
0..1			SubstitutionInformation // DELTA: removed middleman
0..1			TotalDailyDose

Element:		AppointmentTime
Concept:		TBD
Description:	"Date and time of the appointment for this clinic location."
Value:			DateTime

Element:		ExpirationDate
Concept:		TBD
Description:	"The date after which the order may no longer be filled."
Value:			DateTime

Element:		IsHospitalSuppliedSelfAdministered
Concept:		TBD
Description:	"A flag indicating that the medication given to the patient is to be self administered and is to be supplied by the hospitals pharmacy while they are an inpatient."
Value:			YesNo
// BALLOT: Change PharmacyPromise.IsHospitalSuppliedSelfAdministered from YesNo to boolean

Element:		IsSelfAdministered
Concept:		TBD
Description:	"A flag indicating that the medication given to the patient is to be self administered."
Value:			YesNo
// BALLOT: Change PharmacyPromise.IsSelfAdministered from YesNo to boolean

Element:		LastDispenseDate
Concept:		TBD
Description:	"The most recent date (and optionally time) that the medication was distributed to a patient, patient care-giver, or the location at which the patient is receiving care. 'Date&#47;time of the most recent refill or dose dispensed.' - HL7 Version 2.8, RXE-18."
Value:			DateTime

Element:		NeedsHumanReview
Concept:		TBD
Description:	"This optional property is included for compatibility with HL7 version 2. It is used in version 2 messaging to convey that a warning is present in the dispensing instructions field and that downstream applications are expected to alert the human user to the presence of the warning. 'Yes - Indicates that a warning is present. The application receiving the encoded order needs to warn the person administering the drug or treatment to pay attention to the text in RXE-21-pharmacy&#47;treatment special dispensing instructions. No - Indicates no warning ' - HL7 Version 2.8, RXE-20."
Value:			YesNo
// BALLOT: Change PharmacyPromise.NeedsHumanReview from YesNo to boolean

Element:		NumberOfRefillsOrDosesDispensed
Concept:		TBD
Description:	"Number of refills remaining.' - HL7 Version 2.8, RXE-17."
Value:			Count

Element:		NumberOfRefillsRemaining
Concept:		TBD
Description:	"Indicates the number of times the order may be filled without additional authorization. It is calculated by substracting the number of fills already completed from the number of fills authorized by the prescriber. 'This field is conditional because it is required when a prescription is dispensed to an outpatient. It is not relevant to inpatient treatment orders.' - HL7 Version 2.8, RXD-8. 'Number of refills remaining.' - HL7 Version 2.8, RXE-16."
Value:			Count

Element:		RequestedAdministrationTime
Concept:		TBD
Description:	"Specifies when the service is to be performed and how frequently. Note that this is a complex data type that may indicate specific times or intervals (e.g., 10:00 AM, MWF, etc)."
Value:			IntervalValue

Element:		RequestedDuration
Concept:		TBD
Description:	"The duration of an order as requested by the ordering clinician. The duration would be expressed as a number of days, weeks, hours, etc. Note that this length of time might be determined by a business rule of the facilty. For example, most facilties will have a limit of 7 days for antibiotics, and 3 days for schedule 1 drugs."
Value:			Quantity
// BALLOT: PharmacyPromise.RequestedDuration should be datatype Duration, not Quantity

Element:		ScheduleType
Concept:		TBD
Description:	"'This describes the type of schedule for the dispensing of the medication(s) that make up the order. PRE-OP orders are usually considered to be ON-CALL orders, and orders dispensed as MULTI-DOSE CONTAINERS are usually considered to be FILL ON REQUEST orders. C=Continuous, O=One Time, P=PRN, R=Fill On Request, OC=On Call.' (VistA)"
Value:			CodedText

Element:		SubstitutionInformation
Concept:		TBD
Description:	"If the Pharmacist has changed the kind of medication to be dispensed to the patient from the one originally ordered by the prescriber, this property provides a categorization of the kind of substitution that was made. 'Refer to HL7 Table 0167 - Substitution Status in Chapter 2C for suggested values.' - HL7 Version 2.8, RXD-11. 'Refer to HL7 Table 0167 - Substitution Status in Chapter 2C for suggested values.' - HL7 Version 2.8, RXE-9. 'Product&#47;Service Substitution, coded' - NCPDP Script (Field 4457, Data Dictionary 201104) 'Code indicating whether or not the prescriber’s instructions regarding generic substitution were followed.' - NCPDP Telecommunication (Field 408-D8, Data Dictionary 201104). ----- Possible values include (from HL7 Table 167): No substitute was dispensed. This is equivalent to the default (null) value; A generic substitution was dispensed; A therapeutic substitution was dispensed; No product selection indicated; Substitution not allowed by prescriber; Substitution allowed - patient requested product dispensed; Substitution allowed - pharmacist selected product dispensed; Substitution allowed - generic drug not in stock; Substitution allowed - brand drug dispensed as a generic; Substitution not allowed - brand drug mandated by law; Substitution allowed - generic drug not available in marketplace. ----- Possible values include (From NCPDP ECL): No Product Selection Indicated Substitution Not Allowed by Prescriber Substitution Allowed - Patient Requested Product Dispensed Substitution Allowed - Pharmacist Selected Product Dispensed Substitution Allowed - Generic Drug Not in Stock Substitution Allowed - Brand Drug Dispensed as a Generic Override Substitution Not Allowed - Brand Drug Mandated by Law Substitution Allowed - Generic Drug Not Available in Marketplace Substitution Allowed By Prescriber but Plan Requests Brand - Patient's Plan Requested Brand Product To Be Dispensed"
0..1			WasSubstituted
0..1			Type
0..*			ResponsibleParty

Element:		WasSubstituted
Concept:		TBD
Description:	"Whether a substitution was or was not performed on the dispense"
Value:			YesNo
// BALLOT: Change SubstitutionInformation.WasSubstituted from YesNo to boolean

Element:		ResponsibleParty
Concept:		TBD
Description:	"Who is responsible for the substitution"
Value:			PARTICIPATION
// BALLOT: SubstitutionInformation.ResponsibleParty should be a PARTY, not a PARTICIPATION

Element:		TotalDailyDose
Concept:		TBD
Description:	"The total daily dose for this particular pharmaceutical as expressed in terms of actual dispense units.' - HL7 Version 2.8, RXE-19."
Value:			Quantity

